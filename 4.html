<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChÃºc Má»«ng Sinh Nháº­t 3D</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: linear-gradient(to bottom, #fbc2eb, #a6c1ee);
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      perspective: 1000px;
    }
    .scene {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.1s ease-out;
    }
    .center-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 48px;
      font-weight: bold;
      color: white;
      white-space: nowrap;
      text-shadow: 3px 3px 6px #6b47dc;
      z-index: 10;
    }
    .countdown {
      position: fixed;
      top: 10px;
      right: 20px;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      padding: 8px 14px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: bold;
      z-index: 9999;
    }
    .falling-msg, .falling-icon {
      position: absolute;
      top: -60px;
      font-weight: bold;
      opacity: 0.9;
      pointer-events: none;
      transform-style: preserve-3d;
    }
    .falling-msg {
      color: #5a189a;
      font-size: 24px;
      animation: fallMsg linear infinite;
    }
    .falling-icon {
      color: #f72585;
      font-size: 28px;
      animation: fallIcon linear infinite;
    }
    @keyframes fallMsg {
      0% { transform: translateY(-60px) translateZ(0px); opacity: 1; }
      100% { transform: translateY(100vh) translateZ(-200px); opacity: 0; }
    }
    @keyframes fallIcon {
      0% { transform: translateY(-60px) rotate(0deg) translateZ(0px); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg) translateZ(-300px); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="countdown" id="countdown">01:00</div>

  <video autoplay loop muted id="bgm" style="display: none" preload="auto">
    <source src="https://files.catbox.moe/v2cvy7.mp4" type="video/mp4">
    TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ video.
  </video>

  <div class="scene" id="scene">
    <div class="center-text">âœ¨ ChÃºc Má»«ng Sinh Nháº­t âœ¨</div>
  </div>

  <script>
    const iconList = ["ðŸŽ‚", "ðŸŽ‰", "ðŸŽˆ", "ðŸŽ", "ðŸ°", "âœ¨", "ðŸ¥³", "ðŸ’"];
    const messages = [
      "ChÃºc má»«ng sinh nháº­t vui váº»!",
      "Tuá»•i má»›i thÃªn nhiá»u niá»m vui!",
      "ChÃºc Ä‘áº¡t Ä‘Æ°á»£c Æ°á»›c mÆ¡!",
      "Má»™t ngÃ y tháº­t Ä‘áº·c biá»‡t!",
      "ChÃºc sá»©c khá»e dá»“i dÃ o!",
      "Sinh nháº­t háº¡nh phÃºc nhÃ©!",
      "Má»i Ä‘iá»u tá»‘t Ä‘áº¹p!",
      "ChÃºc báº¡n luÃ´n tÆ°Æ¡i cÆ°á»i!",
      "NgÃ y sinh nháº­t tháº­t Ã½ nghÄ©a!",
      "ChÃºc báº¡n mÃ£i mÃ£i tráº» trung!",
      "ChÃºc báº¡n luÃ´n thÃ nh cÃ´ng!",
      "Hay Äƒn chÃ³ng lá»›n",
      "CÃ³ má»™t khÃ´ng khÃ­ thoáº£i mÃ¡i",
      "TrÆ°á»Ÿng thÃ nh hÆ¡n tá»«ng ngÃ y"
    ];

    const scene = document.getElementById('scene');

    function createFallingItem(type = 'icon') {
      const span = document.createElement('span');
      span.className = type === 'icon' ? 'falling-icon' : 'falling-msg';
      span.innerText = type === 'icon' 
        ? iconList[Math.floor(Math.random() * iconList.length)] 
        : messages[Math.floor(Math.random() * messages.length)];
      span.style.left = Math.random() * 100 + 'vw';
      span.style.animationDuration = (type === 'icon' ? (2 + Math.random() * 2) : (5 + Math.random() * 4)) + 's';
      span.style.fontSize = (type === 'icon' ? (20 + Math.random() * 15) : (18 + Math.random() * 10)) + 'px';
      span.style.transform = `translateZ(${Math.random() * 200 - 100}px)`;
      scene.appendChild(span);

      setTimeout(() => span.remove(), 10000);
    }

    setInterval(() => createFallingItem('icon'), 250);
    setInterval(() => createFallingItem('msg'), 1500);

    // Äáº¿m ngÆ°á»£c 60 giÃ¢y vÃ  chuyá»ƒn trang
    let seconds = 60;
    const countdown = document.getElementById('countdown');
    const countdownInterval = setInterval(() => {
      seconds--;
      const m = String(Math.floor(seconds / 60)).padStart(2, '0');
      const s = String(seconds % 60).padStart(2, '0');
      countdown.textContent = `${m}:${s}`;
      if (seconds <= 0) {
        clearInterval(countdownInterval);
        window.location.href = 'nhanqua.html';
      }
    }, 1000);

    // Tá»± Ä‘á»™ng phÃ¡t nháº¡c khi trang táº£i xong
    document.addEventListener('DOMContentLoaded', () => {
      const video = document.getElementById('bgm');
      // Muted ban Ä‘áº§u Ä‘á»ƒ trÃ¡nh trÃ¬nh duyá»‡t cháº·n auto-play
      // vÃ  sáº½ bá» muted sau khi video Ä‘Ã£ báº¯t Ä‘áº§u phÃ¡t
      video.muted = true;

      video.play()
        .then(() => {
          // Táº¯t muted sau khi video Ä‘Ã£ báº¯t Ä‘áº§u phÃ¡t
          video.muted = false;
        })
        .catch(error => {
          console.error("Lá»—i khi phÃ¡t nháº¡c tá»± Ä‘á»™ng:", error);
          // Náº¿u phÃ¡t tá»± Ä‘á»™ng khÃ´ng thÃ nh cÃ´ng, cÃ³ thá»ƒ hiá»ƒn thá»‹ thÃ´ng bÃ¡o
          // hoáº·c thá»­ láº¡i sau má»™t khoáº£ng thá»i gian ngáº¯n.
          // VÃ­ dá»¥:
          // setTimeout(() => {
          //   video.play().then(() => video.muted = false).catch(err => console.error("Lá»—i phÃ¡t láº¡i:", err));
          // }, 1000);
        });
    });

    document.addEventListener('mousemove', (e) => {
      const x = (e.clientX / window.innerWidth - 0.5) * 30;
      const y = (e.clientY / window.innerHeight - 0.5) * -30;
      scene.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
    });
  </script>
</body>
</html>